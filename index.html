<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SABRINA AI | Active</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body { background: #050508; color: #fff; font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; margin: 0; }
        #chat { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg { padding: 15px; border-radius: 10px; max-width: 80%; line-height: 1.5; }
        .user { background: #00ffaa; color: #000; align-self: flex-end; }
        .ai { background: #1a1a22; border-left: 4px solid #00ffaa; align-self: flex-start; }
        .input-box { padding: 20px; background: #0a0a0f; display: flex; gap: 10px; border-top: 1px solid #222; }
        textarea { flex: 1; background: #15151b; border: 1px solid #333; color: #fff; padding: 10px; border-radius: 8px; outline: none; resize: none; }
        button { background: #00ffaa; color: #000; border: none; padding: 10px 25px; border-radius: 8px; font-weight: bold; cursor: pointer; }
        #status { font-size: 0.7rem; color: #666; padding: 5px 20px; }
    </style>
</head>
<body>

    <div id="status">SABRINA: Waiting for input...</div>
    <div id="chat">
        <div class="msg ai">Hello! I am <strong>Sabrina</strong>. Paste your API key in the code, and I will begin working immediately.</div>
    </div>

    <div class="input-box">
        <textarea id="userInput" placeholder="Ask Sabrina something..." rows="1"></textarea>
        <button onclick="startThinking()">EXECUTE</button>
    </div>

    <script>
        // --- PASTE YOUR KEY INSIDE THE QUOTES BELOW ---
        const MY_API_KEY = "PASTE_YOUR_KEY_HERE"; 
        const MODEL_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent";

        async function startThinking() {
            const inputField = document.getElementById('userInput');
            const chat = document.getElementById('chat');
            const status = document.getElementById('status');
            const userText = inputField.value.trim();

            if (!userText) return;
            if (MY_API_KEY === "PASTE_YOUR_KEY_HERE") {
                alert("Stop! You must paste your API Key from Google AI Studio into the code first.");
                return;
            }

            // Show User Message
            chat.innerHTML += `<div class="msg user">${userText}</div>`;
            inputField.value = "";
            status.innerText = "SABRINA: Searching and Thinking...";

            try {
                const response = await fetch(`${MODEL_URL}?key=${MY_API_KEY}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: "Your name is Sabrina. You are an elite, hardworking, smart student AI. Provide logical, detailed answers. User asked: " + userText }] }]
                    })
                });

                const data = await response.json();
                
                if (data.candidates) {
                    const aiReply = data.candidates[0].content.parts[0].text;
                    chat.innerHTML += `<div class="msg ai">${marked.parse(aiReply)}</div>`;
                    status.innerText = "SABRINA: Ready";
                } else {
                    console.error(data);
                    chat.innerHTML += `<div class="msg ai" style="color:red">Error: API rejected the request. Check your key.</div>`;
                    status.innerText = "SABRINA: Connection Error";
                }
            } catch (err) {
                chat.innerHTML += `<div class="msg ai" style="color:red">Connection Blocked! You must upload this file to GitHub Pages or use a 'Live Server' to test it.</div>`;
                status.innerText = "SABRINA: Local Block";
            }
            chat.scrollTop = chat.scrollHeight;
        }
    </script>
</body>
</html>
